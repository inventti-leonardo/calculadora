<script>
function calcular() {
    var expressao = arguments[0];
    for (var i=1; i<arguments.length; i++)
        expressao = expressao.replace('{'+(i-1)+'}', arguments[i]);
    
    var expressaoFormatada = expressao.replace(/[^\d\.\,\+\-\*\/\(\)]/g, '').replace(/\,/g, '.').replace(/\.(?=(\d{3}\.))/g, '');
    return eval(expressaoFormatada).toFixed(2);
}


var html = '<h1>Calculadora</h1>';
html += '<h3>Calculando com diferentes separadores de milhar e decimal</h3>';
html += '<code>';
html += '<p>calcular(\'1234.56\') // '+calcular('1234.56')+'</p>';
html += '<p>calcular(\'1234,56\') // '+calcular('1234,56')+'</p>';
html += '<p>calcular(\'1.234.56\') // '+calcular('1.234.56')+'</p>';
html += '<p>calcular(\'1.234,56\') // '+calcular('1.234,56')+'</p>';
html += '<p>calcular(\'1,234.56\') // '+calcular('1,234.56')+'</p>';
html += '<p>calcular(\'1,234,56\') // '+calcular('1,234,56')+'</p>';
html += '<p>calcular(\'1 234.56\') // '+calcular('1 234.56')+'</p>';
html += '<p>calcular(\'1 234,56\') // '+calcular('1 234,56')+'</p>';
html += '</code>';
html += '<h3>Calculando com letras</h3>';
html += '<code>';
html += '<p>calcular(\'R$1,00 + R$2,00\') // '+calcular('R$1,00 + R$2,00')+'</p>';
html += '<p>calcular(\'2UN * R$3,00\') // '+calcular('2UN * R$3,00')+'</p>';
html += '<p>calcular(\'(2PC * R$3,00) / 2\') // '+calcular('(2PC * R$3,00) / 2')+'</p>';
html += '</code>';
html += '<h3>Calculando com ponto flutuante</h3>';
html += '<code>';
html += '<p>calcular(\'10.1 + 10.2\') // '+calcular('10.1 + 10.2')+'</p>';
html += '</code>';
html += '<h3>Calculando com passagem de par&acirc;metros</h3>';
html += '<code>';
html += '<p>calcular(\'{0}+({1}*{2})\', \'10,1\', 10.2, 2) // '+calcular('{0}+({1}*{2})', '10,1', 10.2, 2)+'</p>';
html += '<p>calcular(\'{0}+{1}\', \'1+(2*2)\', \'3+(4*4)\') // '+calcular('{0}+{1}', '1+(2*2)', '3+(4*4)')+'</p>';
html += '</code>';
html += '<h3>Problemas</b></h3>';
html += '<code>';
html += '<p>calcular(\'1.000\') // '+calcular('1.000')+', o n&uacute;mero "1.000" deveria ser mil ou um?</p>';
html += '</code>';
document.write(html);
</script>